// ==Bookmarklet==
// @name Auto Cookie Clicker
// @author coolreader18
// @script dir jquery-ui
// @script dir js-cookie
// ==/Bookmarklet==
var updateCookie=()=>{Cookies.set("AutoCookieOptions",this.options,{expires:365})};openOptions=(()=>{var i=this.options,n=openOptWin(),t=n.document;$(n).focusout(i=>{i.target.close()});$(t.head).html(`<title>AutoCookie Options</title>\n<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">\n<style>\n.products {\n  border: 1px solid #eee;\n  width: 142px;\n  min-height: 20px;\n  list-style-type: none;\n  margin: 0;\n  padding: 5px 0 0 0;\n  float: left;\n  margin-right: 10px;\n}\ndiv {\n  display: inline-block;\n  padding-bottom: 10px;\n}\n#cps {\n  width: 40px;\n}\n</style>`);$(t.body).html(`<h1>AutoCookie Options</h1>\n<h2>Auto Clicking Options</h2>\n<div>\n  <p>\n    <input type='checkbox' id='bigCookie' checked='${i.bigCookie}'>\n    <label for='bigCookie'>Big Cookie</label>\n    <br>\n    <label for='cps'>Clicks per second: </label>\n    <input id='cps'>\n  </p>\n  <p>\n    <input type='checkbox' id='goldenCookie' checked="${i.goldenCookie}">\n    <label for='goldenCookie'>Golden Cookie</label>\n  </p>\n</div>\n<h2>Auto Buying Options</h2>\n<div style="width: 100%">\n  <div>\n    <h3>Buying</h3>\n    <ol id='buying' class='products' data-items='${JSON.stringify(i.buying)}'>\n  </div>\n  <div>\n    <h3>Not Buying</h3>\n    <ol id='notBuying' class='products' data-items='${JSON.stringify(i.notBuying)}'>\n  </div>\n</div>\n<button onclick='window.close()'>Done</button>`);$("#cps",t).spinner({min:100,step:100,page:5}).on("change spin",n=>{var t=$(n.currentTarget);if(!t.spinner("isValid")){t.val(100)}i.cps=t.val()/1;updateCookie()}).val(i.cps);$(".ui-spinner",t).css("height","30px");$(".products",t).each(function(i,n){$(n).data("items").forEach(i=>{$(n).append($("<li>").attr("data-product",JSON.stringify(i)).text(i.title).css({margin:"0 5px 5px 5px",padding:"5px","font-size":"1.2em",width:"120px"}))})}).sortable({connectWith:".products",update:function(){$(".products",t).each(function(n,t){var e=i[n?"notBuying":"buying"]=[];$(t).children().each(function(i,n){e.push($(n).data("product"))})});updateCookie()}}).disableSelection();$("input[type='checkbox']",t).change(n=>{i[n.currentTarget.id]=n.currentTarget.checked;updateCookie()})});if(this.clicks){openOptions()}else{this.options=Cookies.getJSON("AutoCookieOptions")||{bigCookie:true,cps:100,goldenCookie:true,buying:[],notBuying:[{ind:0,title:"Cursor"},{ind:1,title:"Grandma"},{ind:2,title:"Farm"},{ind:3,title:"Factory"},{ind:4,title:"Mine"},{ind:5,title:"Shipment"},{ind:6,title:"Alchemy lab"},{ind:7,title:"Portal"},{ind:8,title:"Time machine"},{ind:9,title:"Antimatter condenser"}]};updateCookie();setInterval(()=>{var i=this.options;if(i.bigCookie){for(var n=0;n<i.cps/100;n++){$("#bigCookie").click()}}if(i.goldenCookie){$("#goldenCookie").click()}var t=i.buying[Symbol.iterator]();e();function e(){var i=$("#product"+t.next().value.ind+".enabled");if(i.length){i.click()}else{e()}}})}function openOptWin(){return window.open("","AutoCookieOptions","height=600,width=400,status=yes,toolbar=no,menubar=no,location=no")}